PS D:\projects\AWS\lambda> git add .
warning: in the working copy of 'API-Gateway/Pulumi.dev.yaml', LF will be replaced by CRLF the next time Git touches it
warning: in the working copy of 'API-Gateway/Pulumi.yaml', LF will be replaced by CRLF the next time Git touches it
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "fafa"
[main 838f4d7] fafa
 9 files changed, 133 insertions(+), 97 deletions(-)
 create mode 100644 API-Gateway/.gitignore
 create mode 100644 API-Gateway/Pulumi.dev.yaml
 create mode 100644 API-Gateway/Pulumi.yaml
 create mode 100644 API-Gateway/__main__.py
 create mode 100644 API-Gateway/requirements.txt
PS D:\projects\AWS\lambda> git push
Enumerating objects: 22, done.
Counting objects: 100% (22/22), done.
Delta compression using up to 8 threads
Compressing objects: 100% (12/12), done.
Writing objects: 100% (13/13), 1.98 KiB | 674.00 KiB/s, done.
Total 13 (delta 6), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (6/6), completed with 6 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   7c5e794..838f4d7  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "upload"
[main c6cd0e8] upload
 1 file changed, 1 insertion(+), 1 deletion(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 360 bytes | 360.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   838f4d7..c6cd0e8  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "ffffff"
[main 0da7344] ffffff
 1 file changed, 1 insertion(+), 1 deletion(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 9, done.
Counting objects: 100% (9/9), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (5/5), 421 bytes | 421.00 KiB/s, done.
Total 5 (delta 2), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   c6cd0e8..0da7344  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "upload"
[main 699dc1b] upload
 2 files changed, 1 insertion(+), 45 deletions(-)
 delete mode 100644 tem.py
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 350 bytes | 350.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   0da7344..699dc1b  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "json"
[main 26772c0] json
 2 files changed, 5 insertions(+), 5 deletions(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 13, done.
Counting objects: 100% (13/13), done.
Delta compression using up to 8 threads
Compressing objects: 100% (6/6), done.
Writing objects: 100% (7/7), 626 bytes | 313.00 KiB/s, done.
Total 7 (delta 4), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   699dc1b..26772c0  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api"
[main 193f9ca] api
 4 files changed, 258 insertions(+), 169 deletions(-)
 create mode 100644 .github/workflows/api-gateway.yml
PS D:\projects\AWS\lambda> git push
Enumerating objects: 16, done.
Counting objects: 100% (16/16), done.
Delta compression using up to 8 threads
Compressing objects: 100% (8/8), done.
Writing objects: 100% (9/9), 2.54 KiB | 866.00 KiB/s, done.
Total 9 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   26772c0..193f9ca  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-1"
[main dac4a41] api-1
 1 file changed, 1 insertion(+), 3 deletions(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 363 bytes | 363.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   193f9ca..dac4a41  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-2"
[main 3ed8dc8] api-2
 1 file changed, 1 insertion(+), 2 deletions(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 356 bytes | 356.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   dac4a41..3ed8dc8  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-3"   
[main 03b8712] api-3
 1 file changed, 2 insertions(+), 2 deletions(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 414 bytes | 414.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 414 bytes | 414.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-3"
[main d232234] api-3
 1 file changed, 1 insertion(+), 1 deletion(-)
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 414 bytes | 414.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-3"
[main d232234] api-3
Writing objects: 100% (4/4), 414 bytes | 414.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   3ed8dc8..03b8712  main -> main
   3ed8dc8..03b8712  main -> main
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-3"
PS D:\projects\AWS\lambda> git add .
PS D:\projects\AWS\lambda> git commit -m "api-3"
[main d232234] api-3
 1 file changed, 1 insertion(+), 1 deletion(-)
PS D:\projects\AWS\lambda> git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 8 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 379 bytes | 379.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/Galadon123/Lambda-Function-with-Pulumi-python.git
   03b8712..d232234  main -> main
PS D:\projects\AWS\lambda> cd API-Gateway
PS D:\projects\AWS\lambda\API-Gateway> ls


    Directory: D:\projects\AWS\lambda\API-Gateway


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----          7/7/2024   9:26 PM                venv
-a----          7/7/2024   9:25 PM             14 .gitignore
-a----          7/7/2024   9:26 PM             32 Pulumi.dev.yaml
-a----          7/7/2024   9:25 PM            191 Pulumi.yaml
-a----          7/7/2024   9:25 PM             48 requirements.txt
-a----          7/7/2024  10:17 PM           1238 __main__.py


PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/99152319-fc22-493c-927b-74a44e5f0482

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
Outputs:
  + api_url: output<string>

  + api_url: output<string>


Resources:
Resources:
    + 5 to create
    + 5 to create
    1 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/9

     Type                     Name             Status                  Info
     pulumi:pulumi:Stack      API-Gateway-dev  **failed**              1 error
 +   └─ aws:apigatewayv2:Api  my-api           **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Api (my-api):
    error: 1 error occurred:
        * creating API Gateway v2 API (my-api-ad60f80): operation error ApiGatewayV2: CreateApi, https response error StatusCode: 400, RequestID: dc9cfc4e-a8b5-4455-ae3a-2c4adb7e7f53, BadRequestException: Target only supports HTTP Proxy or Lambda Proxy

Resources:
    1 unchanged

Duration: 15s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/c39e345e-aa6d-4bf0-8a25-901dc4bddc8e

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + api_url: output<string>

Resources:
    + 5 to create
    1 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/10

     Type                     Name             Status                  Info
     pulumi:pulumi:Stack      API-Gateway-dev  **failed**              1 error
 +   └─ aws:apigatewayv2:Api  my-api           **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Api (my-api):
    error: 1 error occurred:
        * creating API Gateway v2 API (my-api-05b697d): operation error ApiGatewayV2: CreateApi, https response error StatusCode: 400, RequestID: ec827892-d106-4232-aec8-389b4f351828, BadRequestException: Target only supports HTTP Proxy or Lambda Proxy

Resources:
    1 unchanged

Duration: 31s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/ffd1c3f1-2e45-481c-8279-3e8f170004db

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + api_url: output<string>

Resources:
    + 5 to create
    1 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/11

     Type                     Name             Status                  Info
     pulumi:pulumi:Stack      API-Gateway-dev  **failed**              1 error
 +   └─ aws:apigatewayv2:Api  my-api           **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Api (my-api):
    error: 1 error occurred:
        * creating API Gateway v2 API (my-api-7e02bcd): operation error ApiGatewayV2: CreateApi, https response error StatusCode: 400, RequestID: 53a3732d-99ef-4817-af29-35357ea12e8b, BadRequestException: Target only supports HTTP Proxy or Lambda Proxy

Resources:
    1 unchanged

Duration: 20s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/eb14f7bc-3bc4-452d-be71-d1acd3061f4a

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Api          my-api              create
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + api_url: output<string>

Resources:
    + 5 to create
    1 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/12

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   ├─ aws:apigatewayv2:Api          my-api              created (2s)
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: 41ba8697-a69a-4a89-8b7d-f487ba95ecf0, BadRequestException: Invalid ARN specified in the request

Outputs:
  + api_url: "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"

Resources:
    + 1 created
    1 unchanged

Duration: 14s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/949de358-a1f4-454a-94d7-e10c66acaf85

     Type                 Name             Plan     Info
     pulumi:pulumi:Stack  API-Gateway-dev           1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: Program failed with an unhandled exception:
    Traceback (most recent call last):
      File "D:\projects\AWS\lambda\API-Gateway\__main__.py", line 8, in <lambda>
        ).apply(lambda obj: json.loads(obj.body)['arn'])  # Parse JSON and get 'arn' key
                            ~~~~~~~~~~~~~~~~~~~~^^^^^^^
    TypeError: string indices must be integers, not 'str'


PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/3b68109e-a48d-45d7-8916-2b0b816b95c1

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    2 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/13

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: 3162ec01-610c-4211-9508-eb2f6285928a, BadRequestException: Invalid ARN specified in the request

Outputs:
    api_url          : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
  + s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    2 unchanged

Duration: 15s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/fed51ac0-4785-465e-b645-68885c7936c2

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + lambda_invoke_arn: "arn:aws:lambda:path/2015-03-31/functions/us-east-1:905418218028:function:my-lambda-function/invocations"
  - s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    2 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/14

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: ebfd1e14-347e-48c6-b0b1-b2104f093f19, BadRequestException: AWS ARN for integration must contain path or action

Outputs:
    api_url          : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
  + lambda_invoke_arn: "arn:aws:lambda:path/2015-03-31/functions/us-east-1:905418218028:function:my-lambda-function/invocations"
    s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    2 unchanged

Duration: 14s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/69732626-cdd8-478f-b52d-8ea55cbab9b3

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  - s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    2 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/15

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: ff12eed3-1203-4456-8b1f-256334925228, BadRequestException: AWS ARN for integration must contain path or action

Outputs:
    api_url          : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
  ~ lambda_invoke_arn: "arn:aws:lambda:path/2015-03-31/functions/us-east-1:905418218028:function:my-lambda-function/invocations" => "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"    
    s3_object_content: "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    2 unchanged

Duration: 19s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/bd3e8af1-4983-4ae2-b2b7-349dbdc6e41a

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  + lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
  - lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    2 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/16

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: 6fa36725-3d80-44eb-a85c-d970afc04717, BadRequestException: AWS ARN for integration must contain path or action

Outputs:
    api_url             : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
  + lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
    lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
    s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    2 unchanged

Duration: 15s

PS D:\projects\AWS\lambda\API-Gateway> git add .
PS D:\projects\AWS\lambda\API-Gateway> git add .
PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/8627014c-5dac-4fa0-a7f0-1b15e6e2f48e

     Type                             Name                Plan
     pulumi:pulumi:Stack              API-Gateway-dev
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  - lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
  - lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  + lambda_invoke_url   : "https://lambda.us-east-1.amazonaws.com/2015-03-31/functions/arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    2 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/17

     Type                             Name                Status                  Info
     pulumi:pulumi:Stack              API-Gateway-dev     **failed**              1 error
 +   └─ aws:apigatewayv2:Integration  lambda-integration  **creating failed**     1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Integration (lambda-integration):
    error: 1 error occurred:
        * creating API Gateway v2 Integration: operation error ApiGatewayV2: CreateIntegration, https response error StatusCode: 400, RequestID: 16693cb1-45de-4aa3-b3d4-9c9425d007dd, BadRequestException: Invalid ARN specified in the request

Outputs:
    api_url             : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
    lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
    lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  + lambda_invoke_url   : "https://lambda.us-east-1.amazonaws.com/2015-03-31/functions/arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
    s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    2 unchanged

Duration: 14s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/4f76e261-bf30-4436-81bf-4cd6d357992d

     Type                             Name                Plan        Info
     pulumi:pulumi:Stack              API-Gateway-dev
 +-  ├─ aws:apigatewayv2:Api          my-api              replace     [diff: +target]
 +   ├─ aws:apigatewayv2:Integration  lambda-integration  create
 +   ├─ aws:apigatewayv2:Route        my-route            create
 +   ├─ aws:apigatewayv2:Route        test2-route         create
 +   └─ aws:apigatewayv2:Route        test1-route         create
Outputs:
  - lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
  - lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - lambda_invoke_url   : "https://lambda.us-east-1.amazonaws.com/2015-03-31/functions/arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    + 4 to create
    +-1 to replace
    5 changes. 1 unchanged

Do you want to perform this update? yes
Updating (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/updates/18

     Type                     Name             Status                  Info
     pulumi:pulumi:Stack      API-Gateway-dev  **failed**              1 error
 ++  └─ aws:apigatewayv2:Api  my-api           **creating failed**     [diff: +target]; 1 error
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: update failed

  aws:apigatewayv2:Api (my-api):
    error: 1 error occurred:
        * creating API Gateway v2 API (my-api-4253a53): operation error ApiGatewayV2: CreateApi, https response error StatusCode: 400, RequestID: ab6b74d7-4ee8-4b25-897d-8ad60cada351, BadRequestException: Target only supports HTTP Proxy or Lambda Proxy

Outputs:
  - api_url             : "https://tjv83bfefk.execute-api.us-east-1.amazonaws.com"
  - lambda_execution_arn: "arn:aws:execute-api:us-east-1:905418218028:function:my-lambda-function"
  - lambda_invoke_arn   : "arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - lambda_invoke_url   : "https://lambda.us-east-1.amazonaws.com/2015-03-31/functions/arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function/invocations"
  - s3_object_content   : "\"arn:aws:lambda:us-east-1:905418218028:function:my-lambda-function\"\n"

Resources:
    1 unchanged

Duration: 14s

PS D:\projects\AWS\lambda\API-Gateway> pulumi up
Previewing update (dev)

View in Browser (Ctrl+O): https://app.pulumi.com/Galadon123/API-Gateway/dev/previews/ee0e0d07-d9ed-48e3-9ff3-d4a06e6c543a

     Type                     Name             Plan        Info                                                                                                                                                        
     pulumi:pulumi:Stack      API-Gateway-dev              1 error
 +-  └─ aws:apigatewayv2:Api  my-api           replace     [diff: +target]                                                                                                                                             
Diagnostics:
  pulumi:pulumi:Stack (API-Gateway-dev):
    error: Program failed with an unhandled exception:
    Traceback (most recent call last):
      File "D:\projects\AWS\lambda\API-Gateway\__main__.py", line 7, in <lambda>
        ).apply(lambda obj: obj["Body"].read().decode("utf-8"))
                            ~~~^^^^^^^^
    TypeError: 'GetObjectResult' object is not subscriptable


PS D:\projects\AWS\lambda\API-Gateway> 